{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/refs.js","../src/js/scroll-gallery.js","../src/js/loader.js","../src/js/load-more-btn.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY_API = \"43230635-158e2f6795128fbec19d81d21\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nasync function onSearch(searchQuery, currentPage) {\n    \n    const searchParams = new URLSearchParams({\n        key: KEY_API,\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n        per_page: 15\n    });\n\n    const response = await axios(`${BASE_URL}?${searchParams}`);\n    return response.data;\n}\n\nexport { onSearch };","function createGalleryMarkup(arr) {\n    return arr\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) =>\n  `\n    <li class=\"gallery-item\">\n    <div class=\"gallery-card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\"></a>\n      <div class=\"gallery-info-div\">\n        <ul class=\"info-item-list\">\n          <li class=\"info-item\">\n            <h2>Likes</h2>\n            <p>${likes}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Views</h2>\n            <p>${views}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Comments</h2>\n            <p>${comments}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Downloads</h2>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n      </div>\n      </div>\n    </li>\n  `\n        )\n        .join('');\n}\n\nexport { createGalleryMarkup };\n","const form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector(\".gallery-list\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nconst loader = document.querySelector(\".loader\");\nconst arrowUp = document.querySelector(\".arrow-up-div\");\n\nexport { form, input, gallery, loader, loadMoreBtn, arrowUp };","function scrollGallery(item) {\n    const galleryPageHeight = item.getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryPageHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\nexport { scrollGallery };","import { loader } from './refs';\n\nfunction loaderShow() {\n    loader.classList.toggle('hidden');\n}\n\nexport { loaderShow };","import { loadMoreBtn } from \"./refs\";\n\nfunction removeLoadMoreBtn() {\n    loadMoreBtn.classList.add('hidden');\n}\n\nfunction addLoadMoreBtn() {\n    loadMoreBtn.classList.remove('hidden');\n}\n\nexport { addLoadMoreBtn, removeLoadMoreBtn };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { onSearch } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\nimport { form, input, gallery, loadMoreBtn, arrowUp } from './js/refs.js';\nimport { scrollGallery } from './js/scroll-gallery.js';\nimport { loaderShow } from './js/loader.js';\nimport { addLoadMoreBtn, removeLoadMoreBtn } from './js/load-more-btn';\n\nlet searchQuery = ' ';\nlet currentPage = 1;\nlet totalPages;\n\nlet galleryPictures = new SimpleLightbox('.gallery-list a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n  });\n// loaderHidden();\n// loadMoreBtnHidden();\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', loadMorePictures);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n \n\n  searchQuery = input.value.trim();\n\n \n  if (searchQuery === '') {\n    return iziToast.warning({\n      title: '',\n      position: 'topCenter',\n      message: 'The field can not be empty!!!',\n      timeout: 3000,\n      pauseOnHover: false,\n    });\n  }\n\n  gallery.innerHTML = '';\n  currentPage = 1;\n  // removeLoadMoreBtn();\n  if (!loadMoreBtn.classList.contains('hidden')) {\n    removeLoadMoreBtn();\n  }\n  loaderShow();\n\n  try {\n    const data = await onSearch(searchQuery, currentPage);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 3000,\n        pauseOnHover: false,\n      });\n    } else {\n      gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n\n      galleryPictures.refresh();\n\n      totalPages = data.totalHits / data.hits.length;\n\n      if (currentPage < totalPages) {\n        addLoadMoreBtn();\n      }\n    }\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    form.reset();\n  }\n  loaderShow();\n}\n\nasync function loadMorePictures() {\n  currentPage += 1;\n  removeLoadMoreBtn();\n  loaderShow();\n\n  try {\n    const data = await onSearch(searchQuery, currentPage);\n    gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n    galleryPictures.refresh();\n\n    const galleryItem = document.querySelector('.gallery-item');\n    scrollGallery(galleryItem);\n\n    if (currentPage > totalPages && data.totalHits) {\n      loaderShow();\n      removeLoadMoreBtn();\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results!\",\n        position: 'bottomRight',\n        timeout: 3000,\n        pauseOnHover: false,\n      });\n    }\n    loaderShow();\n    addLoadMoreBtn();\n  } catch (error) {\n    alert(error.message);\n    removeLoadMoreBtn();\n  } finally {\n    if (currentPage > totalPages) {\n      removeLoadMoreBtn();\n      loaderShow();\n      cleanInput();\n    }\n  }\n\n  function cleanInput() {\n    return (inputData.value = '');\n  }\n\n  arrowUp.style.display = \"none\";\nwindow.addEventListener('scroll', function () {\n    if (window.scrollY > 300) {\n       arrowUp.style.display = 'block';\n    } else {\n       arrowUp.style.display = 'none';\n    }\n});\narrowUp.addEventListener(\"click\", onTop);\nfunction onTop() {\n    if (window.scrollY > 0) {\n        window.scrollTo({\n            top: 0,\n            behavior: \"smooth\"\n        })\n    }\n}\n}\n\n\n\n"],"names":["KEY_API","BASE_URL","onSearch","searchQuery","currentPage","searchParams","axios","createGalleryMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","input","gallery","loadMoreBtn","loader","arrowUp","scrollGallery","item","galleryPageHeight","loaderShow","removeLoadMoreBtn","addLoadMoreBtn","totalPages","galleryPictures","SimpleLightbox","onFormSubmit","loadMorePictures","event","iziToast","data","error","galleryItem","cleanInput","onTop"],"mappings":"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"}